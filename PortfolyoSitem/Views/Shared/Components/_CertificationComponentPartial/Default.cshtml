@using PortfolyoSitem.Data
@model List<CertificateTable>

<section id="certificates" class="min-h-screen flex flex-col justify-center px-8 md:px-20 py-20 border-t border-white/5 reveal-section">
    <div class="max-w-4xl mx-auto w-full">

        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold mb-4 relative inline-block">
                <span class="absolute -inset-4 bg-gradient-to-r from-red-600 via-orange-500 to-yellow-400 opacity-20 blur-xl rounded-full"></span>
                <span class="relative text-white uppercase tracking-wider">Sertifikalarım</span>
            </h2>
            <p class="text-muted max-w-2xl mx-auto">
                Uzmanlığımı belgeleyen uluslararası sertifikalar ve başarılar.
            </p>
        </div>

        <div class="relative flex items-center">

            <button id="prevCert" onclick="changePage(-1)" class="absolute left-0 -ml-12 z-10 p-2 rounded-full bg-white/5 border border-white/10 hover:bg-primary/20 hover:border-primary/50 transition-all text-white disabled:opacity-30 disabled:cursor-not-allowed hidden md:block">
                <span class="material-symbols-outlined text-3xl">chevron_left</span>
            </button>

            <div class="w-full overflow-hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="certificates-container">

                    @for (int i = 0; i < Model.Count; i++)
                    {
                        var item = Model[i];
                        // class="cert-item" ekledik ki JS ile bulabilelim
                        <div class="cert-item bg-card p-4 rounded-xl border border-white/10 hover:border-primary/50 transition-all text-center group cursor-pointer hover:-translate-y-1 hover:shadow-lg hover:shadow-primary/10 animate-fade-in"
                             style="@(i < 4 ? "" : "display:none;")">
                            <div class="w-12 h-12 mx-auto bg-white/5 rounded-full flex items-center justify-center mb-3 group-hover:bg-primary/20 transition-colors">
                                <span class="material-symbols-outlined text-2xl text-primary">verified</span>
                            </div>

                            <h3 class="font-bold text-white text-sm md:text-base mb-1 line-clamp-1">@item.CertificateName</h3>
                            <p class="text-xs text-muted">@item.CompanyName</p>
                            <p class="text-[10px] text-gray-500 mt-1">@item.Year</p>
                        </div>
                    }

                </div>
            </div>

            <button id="nextCert" onclick="changePage(1)" class="absolute right-0 -mr-12 z-10 p-2 rounded-full bg-white/5 border border-white/10 hover:bg-primary/20 hover:border-primary/50 transition-all text-white disabled:opacity-30 disabled:cursor-not-allowed hidden md:block">
                <span class="material-symbols-outlined text-3xl">chevron_right</span>
            </button>

        </div>

        <div class="flex justify-center mt-6 gap-2" id="pagination-dots">
        </div>

    </div>
</section>

<script>
    let currentPage = 0;
    const itemsPerPage = 4;
    const items = document.querySelectorAll('.cert-item');
    const totalPages = Math.ceil(items.length / itemsPerPage);

    function changePage(direction) {
        // Yeni sayfa numarasını belirle
        let newPage = currentPage + direction;

        // Sınırları kontrol et
        if (newPage < 0) return; // Başa geldiyse gitme
        if (newPage >= totalPages) return; // Sona geldiyse gitme

        currentPage = newPage;
        updateVisibility();
    }

    function updateVisibility() {
        const start = currentPage * itemsPerPage;
        const end = start + itemsPerPage;

        items.forEach((item, index) => {
            if (index >= start && index < end) {
                item.style.display = 'block'; // Göster
                // Ufak bir animasyon efekti için class ekleyip çıkarabiliriz
                item.classList.add('animate-fade-in');
            } else {
                item.style.display = 'none'; // Gizle
            }
        });

        // Butonların aktiflik durumunu güncelle
        document.getElementById('prevCert').disabled = currentPage === 0;
        document.getElementById('nextCert').disabled = currentPage === totalPages - 1;
    }

    // Sayfa yüklenince ilk durumu ayarla
    document.addEventListener("DOMContentLoaded", function() {
        updateVisibility();
    });
</script>

<style>
    /* Basit bir giriş animasyonu */
    @@keyframes fadeIn {
        from

    {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }

    }

    .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
    }
</style>